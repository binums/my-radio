# Development Dockerfile for Radio Calico
# Includes development tools and hot-reload capabilities

FROM node:20-alpine

# Install development tools
RUN apk add --no-cache \
    git \
    postgresql-client \
    dumb-init

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install all dependencies (including devDependencies)
RUN npm ci

# Copy application files
COPY . .

# Expose application and debug ports
EXPOSE 3000 9229

# Use dumb-init to handle signals
ENTRYPOINT ["dumb-init", "--"]

# Start with nodemon for hot-reload (will be overridden by docker-compose)
CMD ["npm", "start"]
